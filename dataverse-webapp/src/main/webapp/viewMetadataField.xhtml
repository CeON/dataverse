<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <!--@elvariable id="fieldsByType" type="edu.harvard.iq.dataverse.persistence.dataset.DatasetFieldsByType"-->

    <div class="col-sm-9 form-control-static">
        <ui:fragment rendered="#{fieldsByType.datasetFieldType.name == 'datasetContact'}">
            <p class="help-block no-margin-top">
                <h:outputText value="#{bundle['dataset.contact.tip']}"/>
            </p>
        </ui:fragment>
        
        <ui:repeat var="datasetField" value="#{fieldsByType.datasetFields}" varStatus="fieldsLoop">
            <div style="#{fieldsLoop.last ? '': 'padding-bottom: 10px;'}" class="datasetfield-value">
            
                <ui:repeat var="value" value="#{datasetField.values}" varStatus="valuesLoop">
                        <h:outputText value="#{valuesLoop.first?'':'; '}#{ value }"
                                escape="#{datasetField.datasetFieldType.isEscapeOutputText()}"/>
                </ui:repeat>
                
                <ui:repeat var="childField" value="#{datasetField.datasetFieldsChildren}" varStatus="childLoop">
                    <div jsf:rendered="#{childField.parentDisplayFormatIsNewLine}">
                            <ui:repeat value="#{childField.values}" var="value" varStatus="valuesLoop">
                                <h:outputText value="#{valuesLoop.first?'':'; '}#{ value }"
                                        escape="false"/>
                            </ui:repeat>
                    </div>
                        <h:outputText value="#{childField.parentDisplayFormat} " rendered="#{!childLoop.first and !childField.parentDisplayFormatIsNewLine}" escape="false" />
                        <ui:repeat value="#{childField.values}" var="value" varStatus="valuesLoop">
                            <h:outputText value="#{valuesLoop.first?'':'; '}#{ value }" rendered="#{!childField.parentDisplayFormatIsNewLine}"
                                        escape="false"/>
                        </ui:repeat>
                </ui:repeat>
            
            </div>
        </ui:repeat>
    </div>

</ui:composition>